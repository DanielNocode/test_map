<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö–∞—Ä—Ç–∞ –ò–¥–µ–∞–ª—å–Ω—ã—Ö –û—Ç–Ω–æ—à–µ–Ω–∏–π ‚Äî –°—Ö–µ–º–∞ –∫–≤–∏–∑–∞ v2.0</title>
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #0d0d1a;
  --bg-board: #111122;
  --card-bg: #1a1a2e;
  --card-bg2: #1e1e36;
  --border: #2a2a4a;
  --text: #d0d0e8;
  --text-dim: #7777aa;
  --text-bright: #ffffff;
  --pink: #ff6b9d;
  --pink-bg: rgba(255,107,157,0.10);
  --blue: #6b9dff;
  --blue-bg: rgba(107,157,255,0.10);
  --purple: #a06bff;
  --purple-bg: rgba(160,107,255,0.10);
  --orange: #ffaa6b;
  --orange-bg: rgba(255,170,107,0.10);
  --green: #6bffb8;
  --green-bg: rgba(107,255,184,0.10);
  --yellow: #ffd76b;
  --yellow-bg: rgba(255,215,107,0.10);
}

body {
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.5;
  overflow: hidden;
  height: 100vh;
  user-select: text;
}

/* ===== TOOLBAR ===== */
.toolbar {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: 44px;
  background: rgba(13,13,26,0.95);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  padding: 0 16px;
  z-index: 1000;
  gap: 12px;
}
.toolbar-title { font-size: 14px; font-weight: 700; color: var(--text-bright); white-space: nowrap; }
.toolbar-sub { font-size: 11px; color: var(--text-dim); }
.toolbar-sep { width: 1px; height: 20px; background: var(--border); }
.toolbar-nav { display: flex; gap: 3px; flex-wrap: nowrap; overflow-x: auto; }
.chip { padding: 3px 10px; border-radius: 10px; font-size: 11px; cursor: pointer; border: 1px solid transparent; color: var(--text-dim); transition: 0.2s; white-space: nowrap; }
.chip:hover { color: var(--text-bright); background: rgba(255,255,255,0.06); }
.chip-pink { border-color: rgba(255,107,157,0.3); color: var(--pink); }
.chip-blue { border-color: rgba(107,157,255,0.3); color: var(--blue); }
.chip-purple { border-color: rgba(160,107,255,0.3); color: var(--purple); }
.chip-orange { border-color: rgba(255,170,107,0.3); color: var(--orange); }
.chip-green { border-color: rgba(107,255,184,0.3); color: var(--green); }
.zoom-controls { display: flex; align-items: center; gap: 5px; margin-left: auto; }
.zoom-controls span { font-size: 11px; color: var(--text-dim); min-width: 36px; text-align: center; }
.tbtn { padding: 3px 10px; background: rgba(255,255,255,0.05); border: 1px solid var(--border); border-radius: 5px; color: var(--text); font-size: 12px; cursor: pointer; }
.tbtn:hover { background: rgba(255,255,255,0.1); }

/* ===== CANVAS ===== */
.canvas-wrap {
  position: fixed;
  top: 44px; left: 0; right: 0; bottom: 0;
  overflow: hidden;
  cursor: grab;
  background: var(--bg-board);
}
.canvas-wrap.panning { cursor: grabbing; }
.canvas-grid {
  position: absolute; inset: 0;
  background-image: radial-gradient(circle, rgba(255,255,255,0.025) 1px, transparent 1px);
  background-size: 28px 28px;
  pointer-events: none;
}
.canvas {
  position: absolute;
  transform-origin: 0 0;
  will-change: transform;
}

/* ===== SVG ===== */
.arrows-svg {
  position: absolute; top: 0; left: 0;
  pointer-events: none; overflow: visible;
}

/* ===== QUESTION CARD ===== */
.qcard {
  position: absolute;
  width: 340px;
  background: var(--card-bg);
  border: 1.5px solid var(--border);
  border-radius: 14px;
  overflow: hidden;
  box-shadow: 0 4px 24px rgba(0,0,0,0.5);
  transition: box-shadow 0.2s;
}
.qcard:hover { box-shadow: 0 8px 32px rgba(0,0,0,0.7); }

.qcard-head {
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 10px;
  border-bottom: 1px solid var(--border);
}
.qcard-num {
  padding: 3px 10px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 800;
  flex-shrink: 0;
}
.qcard-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-bright);
  flex: 1;
}
.qcard-var {
  font-family: 'JetBrains Mono', 'Fira Code', monospace;
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 4px;
  background: var(--green-bg);
  color: var(--green);
}

.qcard-msg {
  padding: 10px 16px;
  font-size: 12px;
  color: var(--text-dim);
  border-bottom: 1px solid rgba(255,255,255,0.03);
  white-space: pre-line;
  line-height: 1.6;
}

.qcard-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 11px;
}
.qcard-table th {
  text-align: left;
  padding: 6px 12px;
  background: rgba(255,255,255,0.02);
  color: var(--text-dim);
  font-weight: 600;
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}
.qcard-table td {
  padding: 5px 12px;
  border-top: 1px solid rgba(255,255,255,0.025);
}
.qcard-table tr:hover td { background: rgba(255,255,255,0.015); }
.v { color: var(--green); font-family: monospace; font-size: 11px; }
.p { color: var(--yellow); font-weight: 700; }
.b { display: inline-block; padding: 1px 8px; background: var(--purple-bg); border-radius: 4px; color: var(--purple); font-weight: 700; font-size: 11px; }

.qcard-next {
  padding: 8px 16px;
  font-size: 11px;
  border-top: 1px solid rgba(255,255,255,0.03);
  color: var(--text-dim);
}
.qcard-next strong { color: var(--purple); }
.next-pink { color: var(--pink); }
.next-blue { color: var(--blue); }

/* Card border colors */
.qcard-purple { border-color: rgba(160,107,255,0.4); }
.qcard-purple .qcard-head { background: var(--purple-bg); }
.qcard-purple .qcard-num { background: var(--purple-bg); color: var(--purple); }

.qcard-pink { border-color: rgba(255,107,157,0.4); }
.qcard-pink .qcard-head { background: var(--pink-bg); }
.qcard-pink .qcard-num { background: var(--pink-bg); color: var(--pink); }

.qcard-blue { border-color: rgba(107,157,255,0.4); }
.qcard-blue .qcard-head { background: var(--blue-bg); }
.qcard-blue .qcard-num { background: var(--blue-bg); color: var(--blue); }

.qcard-orange { border-color: rgba(255,170,107,0.4); }
.qcard-orange .qcard-head { background: var(--orange-bg); }
.qcard-orange .qcard-num { background: var(--orange-bg); color: var(--orange); }

.qcard-green { border-color: rgba(107,255,184,0.4); }
.qcard-green .qcard-head { background: var(--green-bg); }
.qcard-green .qcard-num { background: var(--green-bg); color: var(--green); }

/* ===== GROUP LABEL ===== */
.group-label {
  position: absolute;
  font-size: 18px;
  font-weight: 800;
  letter-spacing: 1px;
  opacity: 0.15;
  pointer-events: none;
  text-transform: uppercase;
}

/* ===== BRANCH LABEL ===== */
.branch-tag {
  position: absolute;
  padding: 4px 14px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 700;
}

/* ===== DECISION NODE ===== */
.decision {
  position: absolute;
  background: var(--card-bg);
  border: 2px dashed var(--purple);
  border-radius: 14px;
  padding: 14px 24px;
  text-align: center;
  box-shadow: 0 4px 20px rgba(0,0,0,0.4);
}
.decision-label { font-size: 14px; font-weight: 700; color: var(--text-bright); }
.decision-sub { font-size: 11px; color: var(--text-dim); margin-top: 2px; }

/* ===== LEGEND ===== */
.legend {
  position: fixed; bottom: 12px; left: 12px;
  background: rgba(13,13,26,0.92); backdrop-filter: blur(8px);
  border: 1px solid var(--border); border-radius: 10px;
  padding: 10px 14px; z-index: 500; font-size: 11px;
}
.legend-row { display: flex; align-items: center; gap: 7px; margin-bottom: 3px; }
.legend-row:last-child { margin-bottom: 0; }
.legend-dot { width: 10px; height: 10px; border-radius: 3px; }

/* ===== MINIMAP ===== */
.minimap {
  position: fixed; bottom: 12px; right: 12px;
  width: 180px; height: 120px;
  background: rgba(13,13,26,0.92); backdrop-filter: blur(8px);
  border: 1px solid var(--border); border-radius: 10px;
  overflow: hidden; z-index: 500;
}
.minimap canvas { width: 100%; height: 100%; }
.minimap-vp { position: absolute; border: 1.5px solid var(--purple); background: rgba(160,107,255,0.06); border-radius: 2px; pointer-events: none; }

/* ===== PLACEHOLDER ===== */
.placeholder-card {
  position: absolute;
  width: 340px;
  background: var(--card-bg);
  border: 1.5px dashed var(--border);
  border-radius: 14px;
  padding: 30px 20px;
  text-align: center;
  color: var(--text-dim);
  font-size: 13px;
  font-style: italic;
  opacity: 0.6;
}
</style>
</head>
<body>

<!-- TOOLBAR -->
<div class="toolbar">
  <div class="toolbar-title">–ö–∞—Ä—Ç–∞ –ò–¥–µ–∞–ª—å–Ω—ã—Ö –û—Ç–Ω–æ—à–µ–Ω–∏–π</div>
  <div class="toolbar-sub">v2.0</div>
  <div class="toolbar-sep"></div>
  <div class="toolbar-nav">
    <div class="chip chip-purple" onclick="jumpTo(880,60)">–ë–ª–æ–∫ 1</div>
    <div class="chip chip-pink" onclick="jumpTo(200,750)">2–ê</div>
    <div class="chip chip-blue" onclick="jumpTo(1400,750)">2–ë</div>
    <div class="chip chip-orange" onclick="jumpTo(600,2240)">–ë–ª–æ–∫ 3</div>
    <div class="chip chip-pink" onclick="jumpTo(200,3100)">4–ê</div>
    <div class="chip chip-blue" onclick="jumpTo(1400,3100)">4–ë</div>
    <div class="chip chip-pink" onclick="jumpTo(200,4050)">–ë–ª–æ–∫ 5</div>
    <div class="chip chip-green" onclick="jumpTo(800,5010)">–†–µ–∑—É–ª—å—Ç–∞—Ç</div>
  </div>
  <div class="zoom-controls">
    <button class="tbtn" onclick="zoomBy(-0.1)">‚àí</button>
    <span id="zoomLvl">70%</span>
    <button class="tbtn" onclick="zoomBy(0.1)">+</button>
    <button class="tbtn" onclick="resetView()">Fit</button>
  </div>
</div>

<!-- CANVAS -->
<div class="canvas-wrap" id="wrap">
  <div class="canvas-grid"></div>
  <div class="canvas" id="canvas">

    <!-- SVG arrows -->
    <svg class="arrows-svg" id="svg" width="2300" height="6200">
      <defs>
        <marker id="ap" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto"><polygon points="0 0,8 3,0 6" fill="#a06bff"/></marker>
        <marker id="ak" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto"><polygon points="0 0,8 3,0 6" fill="#ff6b9d"/></marker>
        <marker id="ab" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto"><polygon points="0 0,8 3,0 6" fill="#6b9dff"/></marker>
        <marker id="ao" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto"><polygon points="0 0,8 3,0 6" fill="#ffaa6b"/></marker>
        <marker id="ag" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto"><polygon points="0 0,8 3,0 6" fill="#6bffb8"/></marker>
      </defs>
    </svg>

    <!-- ========== BLOCK 1: BASE STATUS ========== -->
    <div class="group-label" style="left:780px; top:20px; color:var(--purple);">–ë–ª–æ–∫ 1: –ë–∞–∑–æ–≤—ã–π –°—Ç–∞—Ç—É—Å</div>

    <!-- Q 1.1 -->
    <div class="qcard qcard-purple" id="q11" style="left:880px; top:60px;">
      <div class="qcard-head">
        <span class="qcard-num">1.1</span>
        <span class="qcard-title">–°–µ–π—á–∞—Å —Ç—ã...</span>
        <span class="qcard-var">{status}</span>
      </div>
      <div class="qcard-msg">–ö–∞—Ä—Ç–∞ –ò–¥–µ–∞–ª—å–Ω—ã—Ö –û—Ç–Ω–æ—à–µ–Ω–∏–π
–ù–∞—á–Ω—ë–º —Å –≥–ª–∞–≤–Ω–æ–≥–æ. –°–µ–π—á–∞—Å —Ç—ã...</div>
      <table class="qcard-table">
        <tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th><th>–î–∞–ª–µ–µ</th></tr>
        <tr><td><span class="b">1</span> –°–≤–æ–±–æ–¥–Ω–∞</td><td class="v">free</td><td>‚Üí 1.1–±</td></tr>
        <tr><td><span class="b">2</span> –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö</td><td class="v">together</td><td>‚Üí 1.2</td></tr>
        <tr><td><span class="b">3</span> –ó–∞–º—É–∂–µ–º</td><td class="v">married</td><td>‚Üí 1.2</td></tr>
      </table>
    </div>

    <!-- Q 1.1–± -->
    <div class="qcard qcard-purple" id="q11b" style="left:540px; top:340px;">
      <div class="qcard-head">
        <span class="qcard-num">1.1–±</span>
        <span class="qcard-title">–ü–æ—á–µ–º—É —Å–µ–π—á–∞—Å –æ–¥–Ω–∞?</span>
        <span class="qcard-var">{why_single}</span>
      </div>
      <div class="qcard-msg">–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ status = free
–ê–≤—Ç–æ: {years} = none</div>
      <table class="qcard-table">
        <tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr>
        <tr><td><span class="b">1</span> –ù–µ –æ—Ç–æ—à–ª–∞ –æ—Ç –ø—Ä–æ—à–ª—ã—Ö</td><td class="v">past_hurt</td></tr>
        <tr><td><span class="b">2</span> –ù–µ –º–æ–≥—É –Ω–∞–π—Ç–∏ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö</td><td class="v">no_good_men</td></tr>
        <tr><td><span class="b">3</span> –ù–µ—Ç –≤—Ä–µ–º–µ–Ω–∏</td><td class="v">no_time</td></tr>
        <tr><td><span class="b">4</span> –°–∞–º–∞ —Ç–∞–∫ —Ä–µ—à–∏–ª–∞</td><td class="v">by_choice</td></tr>
        <tr><td><span class="b">5</span> –¢–∞–∫ —Å–ª–æ–∂–∏–ª–æ—Å—å</td><td class="v">just_happened</td></tr>
      </table>
      <div class="qcard-next">‚Üí <strong>–í–æ–ø—Ä–æ—Å 1.3</strong></div>
    </div>

    <!-- Q 1.2 -->
    <div class="qcard qcard-purple" id="q12" style="left:1220px; top:340px;">
      <div class="qcard-head">
        <span class="qcard-num">1.2</span>
        <span class="qcard-title">–°–∫–æ–ª—å–∫–æ –≤—ã –≤–º–µ—Å—Ç–µ?</span>
        <span class="qcard-var">{years}</span>
      </div>
      <div class="qcard-msg">–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ status ‚â† free</div>
      <table class="qcard-table">
        <tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr>
        <tr><td><span class="b">1</span> –î–æ 1 –≥–æ–¥–∞</td><td class="v">under1</td></tr>
        <tr><td><span class="b">2</span> 1-3 –≥–æ–¥–∞</td><td class="v">1to3</td></tr>
        <tr><td><span class="b">3</span> 3-7 –ª–µ—Ç</td><td class="v">3to7</td></tr>
        <tr><td><span class="b">4</span> 7-15 –ª–µ—Ç</td><td class="v">7to15</td></tr>
        <tr><td><span class="b">5</span> –ë–æ–ª—å—à–µ 15 –ª–µ—Ç</td><td class="v">over15</td></tr>
      </table>
      <div class="qcard-next">‚Üí <strong>–í–æ–ø—Ä–æ—Å 1.3</strong></div>
    </div>

    <!-- branch labels -->
    <div class="branch-tag" style="left:720px; top:280px; background:var(--blue-bg); color:var(--blue);">status = free</div>
    <div class="branch-tag" style="left:1350px; top:280px; background:var(--pink-bg); color:var(--pink);">status ‚â† free</div>

    <!-- Q 1.3 -->
    <div class="qcard qcard-purple" id="q13" style="left:880px; top:640px;">
      <div class="qcard-head">
        <span class="qcard-num">1.3</span>
        <span class="qcard-title">–î–µ—Ç–∏?</span>
        <span class="qcard-var">{kids}</span>
      </div>
      <table class="qcard-table">
        <tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr>
        <tr><td><span class="b">1</span> –ù–µ—Ç –¥–µ—Ç–µ–π</td><td class="v">no</td></tr>
        <tr><td><span class="b">2</span> –ú–∞–ª–µ–Ω—å–∫–∏–µ (–¥–æ 7)</td><td class="v">small</td></tr>
        <tr><td><span class="b">3</span> –®–∫–æ–ª—å–Ω–∏–∫–∏/–ø–æ–¥—Ä–æ—Å—Ç–∫–∏</td><td class="v">teen</td></tr>
        <tr><td><span class="b">4</span> –£–∂–µ –≤–∑—Ä–æ—Å–ª—ã–µ</td><td class="v">adult</td></tr>
      </table>
      <div class="qcard-next">
        <span class="next-blue">status = free ‚Üí –ë–ª–æ–∫ 2–ë</span> ¬∑
        <span class="next-pink">status ‚â† free ‚Üí –ë–ª–æ–∫ 2–ê</span>
      </div>
    </div>

    <!-- ========== DECISION ========== -->
    <div class="decision" id="dec1" style="left:920px; top:900px;">
      <div class="decision-label">–†–∞–∑–≤–∏–ª–∫–∞ –ø–æ {status}</div>
      <div class="decision-sub">free ‚Üí 2–ë ¬∑ together/married ‚Üí 2–ê</div>
    </div>

    <!-- ========== BLOCK 2A: IN COUPLE ========== -->
    <div class="group-label" style="left:100px; top:980px; color:var(--pink);">–ë–ª–æ–∫ 2–ê: –í –ü–∞—Ä–µ</div>

    <!-- placeholder for stage 3 content -->
    <div class="qcard qcard-pink" id="q2a1" style="left:200px; top:1020px;">
      <div class="qcard-head"><span class="qcard-num">2–ê.1</span><span class="qcard-title">–¢–≤–æ—è —Ä–æ–ª—å –≤ –±–ª–∏–∑–æ—Å—Ç–∏</span><span class="qcard-var">{her_role}</span></div>
      <table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr>
        <tr><td><span class="b">1</span> –û–Ω –≤–µ–¥—ë—Ç</td><td class="v">receiver</td></tr>
        <tr><td><span class="b">2</span> –Ø –≤–µ–¥—É</td><td class="v">giver</td></tr>
        <tr><td><span class="b">3</span> –ù–∞ —Ä–∞–≤–Ω—ã—Ö</td><td class="v">equal</td></tr>
        <tr><td><span class="b">4</span> –ü–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é</td><td class="v">flexible</td></tr></table>
    </div>
    <div class="qcard qcard-pink" id="q2a2" style="left:200px; top:1280px;">
      <div class="qcard-head"><span class="qcard-num">2–ê.2</span><span class="qcard-title">–ß—Ç–æ –±—ã –≤—ã–±—Ä–∞–ª–∞ –ø—Ä–æ–∫–∞—á–∞—Ç—å?</span><span class="qcard-var">{her_goal}</span></div>
      <table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr>
        <tr><td><span class="b">1</span> –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ –∂–µ–ª–∞–Ω–Ω–æ—Å—Ç—å</td><td class="v">confidence</td></tr>
        <tr><td><span class="b">2</span> –¢–µ—Ö–Ω–∏–∫–∏ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è –¥–ª—è –Ω–µ–≥–æ</td><td class="v">skills</td></tr>
        <tr><td><span class="b">3</span> –ë–æ–ª—å—à–µ —Å–≤–æ–µ–≥–æ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è</td><td class="v">pleasure</td></tr>
        <tr><td><span class="b">4</span> –ë–æ–ª—å—à–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤</td><td class="v">experiments</td></tr></table>
    </div>
    <div class="qcard qcard-pink" id="q2a3" style="left:200px; top:1560px;">
      <div class="qcard-head"><span class="qcard-num">2–ê.3</span><span class="qcard-title">–ß—Ç–æ —É–∂–µ –µ—Å—Ç—å –≤ –æ–ø—ã—Ç–µ?</span><span class="qcard-var">{her_experience}</span></div>
      <table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr>
        <tr><td><span class="b">1</span> –û—Ä–∞–ª—å–Ω—ã–µ –ª–∞—Å–∫–∏</td><td class="v">oral</td></tr>
        <tr><td><span class="b">2</span> –ü–æ–∑–∏—Ü–∏–∏</td><td class="v">poses</td></tr>
        <tr><td><span class="b">3</span> –ò–≥—Ä—É—à–∫–∏</td><td class="v">toys</td></tr>
        <tr><td><span class="b">4</span> –†–æ–ª–µ–≤—ã–µ –∏–≥—Ä—ã</td><td class="v">roleplay</td></tr>
        <tr><td><span class="b">5</span> –ü–æ–∫–∞ –±–∞–∑–æ–≤–æ</td><td class="v">basic</td></tr></table>
      <div class="qcard-next">‚Üí <strong>–ë–ª–æ–∫ 3</strong></div>
    </div>

    <!-- ========== BLOCK 2B: SINGLE ========== -->
    <div class="group-label" style="left:1350px; top:980px; color:var(--blue);">–ë–ª–æ–∫ 2–ë: –°–≤–æ–±–æ–¥–Ω–∞</div>

    <div class="qcard qcard-blue" id="q2b1" style="left:1400px; top:1020px;">
      <div class="qcard-head"><span class="qcard-num">2–ë.1</span><span class="qcard-title">–ö–æ–≥–¥–∞ —Å–µ–∫—Å –±—ã–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑?</span><span class="qcard-var">{last_sex}</span></div>
      <table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th><th>–ë–∞–ª–ª—ã</th></tr>
        <tr><td><span class="b">1</span> –ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ</td><td class="v">this_week</td><td class="p">5</td></tr>
        <tr><td><span class="b">2</span> –í —ç—Ç–æ–º –º–µ—Å—è—Ü–µ</td><td class="v">this_month</td><td class="p">4</td></tr>
        <tr><td><span class="b">3</span> –ù–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥</td><td class="v">few_months</td><td class="p">3</td></tr>
        <tr><td><span class="b">4</span> –ü–æ–ª–≥–æ–¥–∞-–≥–æ–¥</td><td class="v">half_year</td><td class="p">2</td></tr>
        <tr><td><span class="b">5</span> –ë–æ–ª—å—à–µ –≥–æ–¥–∞</td><td class="v">over_year</td><td class="p">1</td></tr></table>
    </div>
    <div class="qcard qcard-blue" id="q2b2" style="left:1400px; top:1380px;">
      <div class="qcard-head"><span class="qcard-num">2–ë.2</span><span class="qcard-title">–¢–µ–±—è –∑–æ–≤—É—Ç –Ω–∞ —Å–≤–∏–¥–∞–Ω–∏—è?</span><span class="qcard-var">{dates_invites}</span></div>
      <table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th><th>–ë–∞–ª–ª—ã</th></tr>
        <tr><td><span class="b">1</span> –†–µ–≥—É–ª—è—Ä–Ω–æ</td><td class="v">often</td><td class="p">5</td></tr>
        <tr><td><span class="b">2</span> –ò–Ω–æ–≥–¥–∞</td><td class="v">sometimes</td><td class="p">4</td></tr>
        <tr><td><span class="b">3</span> –†–µ–¥–∫–æ</td><td class="v">rare</td><td class="p">3</td></tr>
        <tr><td><span class="b">4</span> –ü–æ—á—Ç–∏ –Ω–∏–∫–æ–≥–¥–∞</td><td class="v">almost_never</td><td class="p">2</td></tr>
        <tr><td><span class="b">5</span> –ù–µ –¥–∞—é –ø–æ–≤–æ–¥–∞</td><td class="v">no_signals</td><td class="p">1</td></tr></table>
    </div>
    <div class="qcard qcard-blue" id="q2b3" style="left:1400px; top:1740px;">
      <div class="qcard-head"><span class="qcard-num">2–ë.3</span><span class="qcard-title">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤?</span><span class="qcard-var">{dating_apps}</span></div>
      <table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th><th>–ë–∞–ª–ª—ã</th></tr>
        <tr><td><span class="b">1</span> –ê–∫—Ç–∏–≤–Ω–æ</td><td class="v">active</td><td class="p">5</td></tr>
        <tr><td><span class="b">2</span> –ò–Ω–æ–≥–¥–∞</td><td class="v">passive</td><td class="p">3</td></tr>
        <tr><td><span class="b">3</span> –ü—Ä–æ–±–æ–≤–∞–ª–∞, —É–¥–∞–ª–∏–ª–∞</td><td class="v">tried_quit</td><td class="p">2</td></tr>
        <tr><td><span class="b">4</span> –ü—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ –Ω–µ—Ç</td><td class="v">no_principle</td><td class="p">1</td></tr>
        <tr><td><span class="b">5</span> –î—É–º–∞—é –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å</td><td class="v">thinking</td><td class="p">2</td></tr></table>
    </div>
    <div class="qcard qcard-blue" id="q2b4" style="left:1780px; top:1020px;">
      <div class="qcard-head"><span class="qcard-num">2–ë.4</span><span class="qcard-title">–£–º–µ–µ—à—å —Ñ–ª–∏—Ä—Ç–æ–≤–∞—Ç—å?</span><span class="qcard-var">{flirt_skill}</span></div>
      <table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th><th>–ë–∞–ª–ª—ã</th></tr>
        <tr><td><span class="b">1</span> –≠—Ç–æ –º–æ–π –∫–æ–Ω—ë–∫</td><td class="v">expert</td><td class="p">5</td></tr>
        <tr><td><span class="b">2</span> –£–º–µ—é</td><td class="v">good</td><td class="p">4</td></tr>
        <tr><td><span class="b">3</span> –ü—ã—Ç–∞—é—Å—å</td><td class="v">trying</td><td class="p">3</td></tr>
        <tr><td><span class="b">4</span> –°—Ç–µ—Å–Ω—è—é—Å—å</td><td class="v">shy</td><td class="p">2</td></tr>
        <tr><td><span class="b">5</span> –ñ–¥—É –∫–æ–≥–¥–∞ –ø–æ–¥–æ–π–¥—É—Ç</td><td class="v">passive</td><td class="p">1</td></tr></table>
    </div>
    <div class="qcard qcard-blue" id="q2b5" style="left:1780px; top:1380px;">
      <div class="qcard-head"><span class="qcard-num">2–ë.5</span><span class="qcard-title">–ü–µ—Ä–≤–æ–µ —Å–≤–∏–¥–∞–Ω–∏–µ: —Å–æ—Å—Ç–æ—è–Ω–∏–µ?</span><span class="qcard-var">{first_date_feel}</span></div>
      <table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th><th>–ë–∞–ª–ª—ã</th></tr>
        <tr><td><span class="b">1</span> –£–≤–µ—Ä–µ–Ω–Ω–æ</td><td class="v">confident</td><td class="p">5</td></tr>
        <tr><td><span class="b">2</span> –ù–æ—Ä–º–∞–ª—å–Ω–æ</td><td class="v">normal</td><td class="p">4</td></tr>
        <tr><td><span class="b">3</span> –ù–∞–ø—Ä—è–≥–∞—é—Å—å</td><td class="v">tense</td><td class="p">2</td></tr>
        <tr><td><span class="b">4</span> –°–∏–ª—å–Ω–æ –Ω–µ—Ä–≤–Ω–∏—á–∞—é</td><td class="v">anxious</td><td class="p">1</td></tr>
        <tr><td><span class="b">5</span> –î–∞–≤–Ω–æ –Ω–µ –±—ã–ª–∞</td><td class="v">forgot</td><td class="p">2</td></tr></table>
    </div>
    <div class="qcard qcard-blue" id="q2b6" style="left:1780px; top:1740px;">
      <div class="qcard-head"><span class="qcard-num">2–ë.6</span><span class="qcard-title">–ß—Ç–æ —Ö–æ—á–µ—à—å –ø—Ä–æ–∫–∞—á–∞—Ç—å?</span><span class="qcard-var">{her_goal_single}</span></div>
      <table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr>
        <tr><td><span class="b">1</span> –ü—Ä–∏–≤–ª–µ–∫–∞—Ç—å –¥–æ—Å—Ç–æ–π–Ω—ã—Ö</td><td class="v">attract</td></tr>
        <tr><td><span class="b">2</span> –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ —Å–µ–∫—Å—É–∞–ª—å–Ω–æ—Å—Ç—å</td><td class="v">confidence</td></tr>
        <tr><td><span class="b">3</span> –ü–æ–Ω—è—Ç—å –∫–∞–∫–æ–π –Ω—É–∂–µ–Ω</td><td class="v">understand</td></tr>
        <tr><td><span class="b">4</span> –ò—Å–∫—É—Å—Å—Ç–≤–æ —Å–æ–±–ª–∞–∑–Ω–µ–Ω–∏—è</td><td class="v">seduce</td></tr>
        <tr><td><span class="b">5</span> –ó–¥–æ—Ä–æ–≤—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è</td><td class="v">healthy</td></tr></table>
      <div class="qcard-next">‚Üí <strong>–ë–ª–æ–∫ 3</strong></div>
    </div>

    <!-- ========== BLOCK 3: OPENNESS ========== -->
    <div class="group-label" style="left:760px; top:2180px; color:var(--orange);">–ë–ª–æ–∫ 3: –†–∞—Å–∫—Ä–µ–ø–æ—â—ë–Ω–Ω–æ—Å—Ç—å (–¥–ª—è –≤—Å–µ—Ö)</div>

    <div class="qcard qcard-orange" id="q31" style="left:200px; top:2240px;"><div class="qcard-head"><span class="qcard-num">3.1</span><span class="qcard-title">–°—Ç–∏–ª—å –æ–¥–µ–∂–¥—ã</span><span class="qcard-var">{style}</span></div><div class="qcard-msg">–ë–∞–ª–ª—ã: 1 / 2 / 4 / 5</div></div>
    <div class="qcard qcard-orange" id="q32" style="left:600px; top:2240px;"><div class="qcard-head"><span class="qcard-num">3.2</span><span class="qcard-title">–û—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –æ—Ä–∞–ª—å–Ω—ã–º –ª–∞—Å–∫–∞–º</span><span class="qcard-var">{oral_attitude}</span></div><div class="qcard-msg">–ë–∞–ª–ª—ã: 1 / 2 / 4 / 5 / 0</div></div>
    <div class="qcard qcard-orange" id="q33" style="left:1000px; top:2240px;"><div class="qcard-head"><span class="qcard-num">3.3</span><span class="qcard-title">–ö–æ–º—Ñ–æ—Ä—Ç —Å —Ç–µ–ª–æ–º</span><span class="qcard-var">{body_comfort}</span></div><div class="qcard-msg">–ë–∞–ª–ª—ã: 1 / 2 / 3 / 4 / 5</div></div>
    <div class="qcard qcard-orange" id="q34" style="left:1400px; top:2240px;"><div class="qcard-head"><span class="qcard-num">3.4</span><span class="qcard-title">–û–ø—ã—Ç —Å –∏–≥—Ä—É—à–∫–∞–º–∏</span><span class="qcard-var">{toys_exp}</span></div><div class="qcard-msg">–ë–∞–ª–ª—ã: 1 / 2 / 3 / 4 / 5</div></div>
    <div class="qcard qcard-orange" id="q35" style="left:1800px; top:2240px;"><div class="qcard-head"><span class="qcard-num">3.5</span><span class="qcard-title">–ì–æ–≤–æ—Ä–∏—Ç—å –æ –∂–µ–ª–∞–Ω–∏—è—Ö</span><span class="qcard-var">{communicate_desires}</span></div><div class="qcard-msg">–ë–∞–ª–ª—ã: 1 / 2 / 3 / 4 / 5</div></div>
    <div class="qcard qcard-orange" id="q36" style="left:200px; top:2410px;"><div class="qcard-head"><span class="qcard-num">3.6</span><span class="qcard-title">–û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º</span><span class="qcard-var">{experiments}</span></div><div class="qcard-msg">–ë–∞–ª–ª—ã: 1 / 2 / 3 / 4 / 5</div></div>
    <div class="qcard qcard-orange" id="q37" style="left:600px; top:2410px;"><div class="qcard-head"><span class="qcard-num">3.7</span><span class="qcard-title">–ï—ë –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞</span><span class="qcard-var">{her_initiative}</span></div><div class="qcard-msg">–ë–∞–ª–ª—ã: 1 / 2 / 3 / 5</div></div>
    <div class="qcard qcard-orange" id="q38" style="left:1000px; top:2410px;"><div class="qcard-head"><span class="qcard-num">3.8</span><span class="qcard-title">–í–æ–∫–∞–ª –≤ —Å–µ–∫—Å–µ</span><span class="qcard-var">{vocal}</span></div><div class="qcard-msg">–ë–∞–ª–ª—ã: 1 / 2 / 4 / 5</div></div>
    <div class="qcard qcard-orange" id="q39" style="left:1400px; top:2410px;"><div class="qcard-head"><span class="qcard-num">3.9</span><span class="qcard-title">–õ–æ–∫–∞—Ü–∏–∏ —Å–µ–∫—Å–∞</span><span class="qcard-var">{location}</span></div><div class="qcard-msg">–ë–∞–ª–ª—ã: 1 / 3 / 5 / 5</div></div>

    <div class="qcard qcard-orange" id="scoring" style="left:580px; top:2600px; width:1000px;">
      <div class="qcard-head"><span class="qcard-num">5</span><span class="qcard-title">–®–∫–∞–ª–∞ –±–∞–ª–ª–æ–≤ {total_score} ‚Üí {level}</span><span class="qcard-var">0..44</span></div>
      <table class="qcard-table"><tr><th>–î–∏–∞–ø–∞–∑–æ–Ω</th><th>–ö–æ–¥</th><th>–£—Ä–æ–≤–µ–Ω—å</th></tr>
        <tr><td>0-10</td><td class="v">sleeping</td><td>–°–ø—è—â–∞—è –∫—Ä–∞—Å–∞–≤–∏—Ü–∞ üõèÔ∏è</td></tr>
        <tr><td>11-18</td><td class="v">awakening</td><td>–ü—Ä–æ—Å—ã–ø–∞—é—â–∞—è—Å—è üåÖ</td></tr>
        <tr><td>19-28</td><td class="v">free</td><td>–†–∞—Å–∫—Ä–µ–ø–æ—â—ë–Ω–Ω–∞—è üî•</td></tr>
        <tr><td>29-38</td><td class="v">fire</td><td>–û–≥–æ–Ω—å üî•üî•</td></tr>
        <tr><td>39-44</td><td class="v">goddess</td><td>–ë–æ–≥–∏–Ω—è üëë</td></tr></table>
    </div>

    <div class="decision" id="dec2" style="left:920px; top:2930px;">
      <div class="decision-label">–†–∞–∑–≤–∏–ª–∫–∞ 2 –ø–æ {status}</div>
      <div class="decision-sub">free ‚Üí 4–ë ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç ¬∑ ‚â†free ‚Üí 4–ê ‚Üí 5 ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç</div>
    </div>
    <div class="branch-tag" style="left:760px; top:3000px; background:var(--pink-bg); color:var(--pink);">status ‚â† free ‚Üí 4–ê ‚Üí 5</div>
    <div class="branch-tag" style="left:1220px; top:3000px; background:var(--blue-bg); color:var(--blue);">status = free ‚Üí 4–ë</div>

    <div class="group-label" style="left:100px; top:3060px; color:var(--pink);">–ë–ª–æ–∫ 4–ê: –ü—Ä–æ –ù–µ–≥–æ</div>
    <div class="qcard qcard-pink" id="q4a1" style="left:200px; top:3100px;"><div class="qcard-head"><span class="qcard-num">4–ê.1</span><span class="qcard-title">–ö–∞–∫ –æ–Ω –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∂–µ–ª–∞–Ω–∏–µ?</span><span class="qcard-var">{he_desire}</span></div><table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr><tr><td><span class="b">1</span> –ü—Ä—è–º–æ</td><td class="v">direct</td></tr><tr><td><span class="b">2</span> –ù–∞–º—ë–∫–∞–º–∏</td><td class="v">hints</td></tr><tr><td><span class="b">3</span> –†–µ–¥–∫–æ</td><td class="v">passive</td></tr></table></div>
    <div class="qcard qcard-pink" id="q4a2" style="left:200px; top:3360px;"><div class="qcard-head"><span class="qcard-num">4–ê.2</span><span class="qcard-title">–ß—Ç–æ –µ–º—É –Ω—Ä–∞–≤–∏—Ç—Å—è?</span><span class="qcard-var">{he_likes}</span></div><table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr><tr><td><span class="b">1</span> –°—Ç—Ä–∞—Å—Ç—å</td><td class="v">passion</td></tr><tr><td><span class="b">2</span> –ù–µ–∂–Ω–æ—Å—Ç—å</td><td class="v">tenderness</td></tr><tr><td><span class="b">3</span> –ù–æ–≤–∏–∑–Ω–∞</td><td class="v">novelty</td></tr><tr><td><span class="b">4</span> –ú–∏–Ω–µ—Ç</td><td class="v">oral</td></tr><tr><td><span class="b">5</span> –í—Å–µ–≥–æ –ø–æ–Ω–µ–º–Ω–æ–≥—É</td><td class="v">everything</td></tr></table></div>
    <div class="qcard qcard-pink" id="q4a3" style="left:200px; top:3680px;"><div class="qcard-head"><span class="qcard-num">4–ê.3</span><span class="qcard-title">–†–µ–∞–∫—Ü–∏—è –Ω–∞ —Ç–≤–æ—é –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É</span><span class="qcard-var">{he_response}</span></div><table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr><tr><td><span class="b">1</span> –í –≤–æ—Å—Ç–æ—Ä–≥–µ</td><td class="v">enthusiastic</td></tr><tr><td><span class="b">2</span> –†–∞–¥, –Ω–æ —Ä–µ–¥–∫–æ –æ—Ç–≤–µ—á–∞–µ—Ç</td><td class="v">accepts</td></tr><tr><td><span class="b">3</span> –ù–µ –æ—Ç–≤–µ—á–∞–µ—Ç</td><td class="v">cold</td></tr><tr><td><span class="b">4</span> –†–µ–¥–∫–æ –ø—Ä–æ—è–≤–ª—è—é</td><td class="v">rare</td></tr></table><div class="qcard-next">‚Üí <strong>–ë–ª–æ–∫ 5</strong></div></div>

    <div class="group-label" style="left:1350px; top:3060px; color:var(--blue);">–ë–ª–æ–∫ 4–ë: –ü—Ä–æ –ò–¥–µ–∞–ª</div>
    <div class="qcard qcard-blue" id="q4b1" style="left:1400px; top:3100px;"><div class="qcard-head"><span class="qcard-num">4–ë.1</span><span class="qcard-title">–¢–∏–ø–∞–∂ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –º—É–∂—á–∏–Ω—ã</span><span class="qcard-var">{ideal_type}</span></div><table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr><tr><td><span class="b">1</span> –ê–ª—å—Ñ–∞</td><td class="v">alpha</td></tr><tr><td><span class="b">2</span> –†–æ–º–∞–Ω—Ç–∏–∫</td><td class="v">romantic</td></tr><tr><td><span class="b">3</span> –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª</td><td class="v">intellectual</td></tr><tr><td><span class="b">4</span> –í–µ—Å–µ–ª—å—á–∞–∫</td><td class="v">fun</td></tr></table></div>
    <div class="qcard qcard-blue" id="q4b2" style="left:1400px; top:3360px;"><div class="qcard-head"><span class="qcard-num">4–ë.2</span><span class="qcard-title">–ß—Ç–æ –¥–æ–ª–∂–Ω–æ —Ü–µ–ø–ª—è—Ç—å?</span><span class="qcard-var">{ideal_vibe}</span></div><table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr><tr><td><span class="b">1</span> –°–∏–ª–∞ –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å</td><td class="v">strength</td></tr><tr><td><span class="b">2</span> –ó–∞–±–æ—Ç–∞ –∏ –≤–Ω–∏–º–∞–Ω–∏–µ</td><td class="v">care</td></tr><tr><td><span class="b">3</span> –°—Ç—Ä–∞—Å—Ç—å</td><td class="v">desire</td></tr><tr><td><span class="b">4</span> –£–≤–∞–∂–µ–Ω–∏–µ</td><td class="v">respect</td></tr></table></div>
    <div class="qcard qcard-blue" id="q4b3" style="left:1400px; top:3620px;"><div class="qcard-head"><span class="qcard-num">4–ë.3</span><span class="qcard-title">–í –±–ª–∏–∑–æ—Å—Ç–∏ –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ...</span><span class="qcard-var">{ideal_intimacy}</span></div><table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr><tr><td><span class="b">1</span> –•–∏–º–∏—è</td><td class="v">chemistry</td></tr><tr><td><span class="b">2</span> –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–≤—è–∑—å</td><td class="v">emotional</td></tr><tr><td><span class="b">3</span> –ß—É–≤—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å</td><td class="v">sensual</td></tr><tr><td><span class="b">4</span> –û—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º</td><td class="v">open</td></tr></table><div class="qcard-next">‚Üí <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç</strong></div></div>

    <div class="group-label" style="left:100px; top:4000px; color:var(--pink);">–ë–ª–æ–∫ 5: –ü—Ä–æ –û—Ç–Ω–æ—à–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –≤ –ø–∞—Ä–µ)</div>
    <div class="qcard qcard-pink" id="q51" style="left:200px; top:4050px;"><div class="qcard-head"><span class="qcard-num">5.1</span><span class="qcard-title">–ß–∞—Å—Ç–æ—Ç–∞ –±–ª–∏–∑–æ—Å—Ç–∏</span><span class="qcard-var">{frequency}</span></div><table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th><th>–ë–∞–ª–ª—ã</th></tr><tr><td><span class="b">1</span> –ö–∞–∂–¥—ã–π –¥–µ–Ω—å</td><td class="v">daily</td><td class="p">5</td></tr><tr><td><span class="b">2</span> 2-3 —Ä–∞–∑–∞/–Ω–µ–¥.</td><td class="v">often</td><td class="p">4</td></tr><tr><td><span class="b">3</span> –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é</td><td class="v">weekly</td><td class="p">3</td></tr><tr><td><span class="b">4</span> –ü–∞—Ä—É —Ä–∞–∑/–º–µ—Å.</td><td class="v">monthly</td><td class="p">2</td></tr><tr><td><span class="b">5</span> –†–µ–∂–µ</td><td class="v">rare</td><td class="p">1</td></tr></table></div>
    <div class="qcard qcard-pink" id="q52" style="left:600px; top:4050px;"><div class="qcard-head"><span class="qcard-num">5.2</span><span class="qcard-title">–ö—Ç–æ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç?</span><span class="qcard-var">{initiator}</span></div><table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr><tr><td><span class="b">1</span> –ß–∞—â–µ –æ–Ω</td><td class="v">he</td></tr><tr><td><span class="b">2</span> –ß–∞—â–µ —è</td><td class="v">she</td></tr><tr><td><span class="b">3</span> 50/50</td><td class="v">balanced</td></tr><tr><td><span class="b">4</span> –ù–∏–∫—Ç–æ</td><td class="v">nobody</td></tr></table></div>
    <div class="qcard qcard-pink" id="q53" style="left:200px; top:4310px;"><div class="qcard-head"><span class="qcard-num">5.3</span><span class="qcard-title">–ò–∑–º–µ–Ω—ã/–ø–æ–¥–æ–∑—Ä–µ–Ω–∏—è</span><span class="qcard-var">{cheating}</span></div><table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr><tr><td><span class="b">1</span> –ü–æ–ª–Ω–æ–µ –¥–æ–≤–µ—Ä–∏–µ</td><td class="v">trust</td></tr><tr><td><span class="b">2</span> –ò–Ω–æ–≥–¥–∞ —Å–æ–º–Ω–µ–Ω–∏—è</td><td class="v">doubts</td></tr><tr><td><span class="b">3</span> –ï—Å—Ç—å –ø–æ–¥–æ–∑—Ä–µ–Ω–∏—è</td><td class="v">suspect</td></tr><tr><td><span class="b">4</span> –î–∞, –±—ã–ª–∞ –∏–∑–º–µ–Ω–∞</td><td class="v">yes</td></tr><tr><td><span class="b">5</span> –ù–µ —Ö–æ—á—É –æ—Ç–≤–µ—á–∞—Ç—å</td><td class="v">skip</td></tr></table></div>
    <div class="qcard qcard-pink" id="q54" style="left:600px; top:4310px;"><div class="qcard-head"><span class="qcard-num">5.4</span><span class="qcard-title">–ì–ª–∞–≤–Ω–∞—è –±–æ–ª—å –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö</span><span class="qcard-var">{main_problem}</span></div><table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr><tr><td><span class="b">1</span> –ò–∑–º–µ–Ω–∞/–ø–æ–¥–æ–∑—Ä–µ–Ω–∏—è</td><td class="v">cheating_worry</td></tr><tr><td><span class="b">2</span> –ö–∞–∫ —Å–æ—Å–µ–¥–∏</td><td class="v">roommates</td></tr><tr><td><span class="b">3</span> –ù–µ—Ç —Ä–æ–º–∞–Ω—Ç–∏–∫–∏</td><td class="v">no_romance</td></tr><tr><td><span class="b">4</span> –ù–µ—Ç —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è</td><td class="v">no_pleasure</td></tr><tr><td><span class="b">5</span> –ú–Ω–æ–≥–æ –æ–±–∏–¥</td><td class="v">resentment</td></tr><tr><td><span class="b">6</span> –í—Å—ë —Ö–æ—Ä–æ—à–æ</td><td class="v">ok</td></tr></table></div>
    <div class="qcard qcard-pink" id="q55" style="left:400px; top:4630px;"><div class="qcard-head"><span class="qcard-num">5.5</span><span class="qcard-title">–ß—Ç–æ —Ö–æ—á–µ—à—å –∏–∑–º–µ–Ω–∏—Ç—å?</span><span class="qcard-var">{change_wish}</span></div><table class="qcard-table"><tr><th>–ö–Ω–æ–ø–∫–∞</th><th>–ó–Ω–∞—á–µ–Ω–∏–µ</th></tr><tr><td><span class="b">1</span> –•–æ—á—É —á–∞—â–µ</td><td class="v">more_frequency</td></tr><tr><td><span class="b">2</span> –•–æ—á—É —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–µ–µ</td><td class="v">more_variety</td></tr><tr><td><span class="b">3</span> –•–æ—á—É –±–æ–ª—å—à–µ —Å—Ç—Ä–∞—Å—Ç–∏</td><td class="v">more_passion</td></tr><tr><td><span class="b">4</span> –•–æ—á—É –±–æ–ª—å—à–µ —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏—è</td><td class="v">more_pleasure</td></tr><tr><td><span class="b">5</span> –í—Å—ë —É—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç</td><td class="v">ok</td></tr></table><div class="qcard-next">‚Üí <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç</strong></div></div>

    <div class="group-label" style="left:100px; top:4950px; color:var(--green);">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –ª–æ–≥–∏–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π</div>

    <div class="qcard qcard-green" id="recCouple" style="left:120px; top:5010px; width:980px;">
      <div class="qcard-head"><span class="qcard-num">–ü1-–ü15</span><span class="qcard-title">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –≤ –ø–∞—Ä–µ</span><span class="qcard-var">top-down</span></div>
      <div class="qcard-msg">–í—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–µ—Ä–≤–∞—è –ø–æ–¥—Ö–æ–¥—è—â–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è.</div>
      <table class="qcard-table"><tr><th>#</th><th>–õ–æ–≥–∏–∫–∞</th></tr>
        <tr><td>–ü3</td><td>{main_problem}=cheating_worry/suspect/yes ‚Üí –∫—Ä–∏–∑–∏—Å –¥–æ–≤–µ—Ä–∏—è</td></tr>
        <tr><td>–ü4</td><td>{main_problem}=roommates/resentment ‚Üí –æ—Ç–Ω–æ—à–µ–Ω–∏—è –æ—Å—Ç—ã–ª–∏</td></tr>
        <tr><td>–ü11</td><td>{he_desire}=passive & {he_response}=cold/accepts</td></tr>
        <tr><td>–ü12</td><td>{level}=fire/goddess & {he_response}=cold</td></tr>
        <tr><td>–ü5</td><td>{her_goal}=pleasure OR {main_problem}=no_pleasure</td></tr>
        <tr><td>–ü6</td><td>{he_likes}=oral & {oral_attitude}=dislike/neutral/no</td></tr>
        <tr><td>–ü9</td><td>{kids}=small & {frequency}=monthly/rare</td></tr>
        <tr><td>–ü10</td><td>{main_problem}=no_romance</td></tr>
        <tr><td>–ü7</td><td>{years}=3to7/7to15/over15 & {change_wish}=more_variety</td></tr>
        <tr><td>–ü13</td><td>{change_wish}=more_frequency</td></tr>
        <tr><td>–ü14</td><td>{change_wish}=more_passion</td></tr>
        <tr><td>–ü8</td><td>{years}=under1/1to3 & {main_problem}=ok</td></tr>
        <tr><td>–ü15</td><td>Fallback</td></tr></table>
    </div>

    <div class="qcard qcard-green" id="recSingle" style="left:1120px; top:5010px; width:980px;">
      <div class="qcard-head"><span class="qcard-num">–°1-–°15</span><span class="qcard-title">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥–ª—è —Å–≤–æ–±–æ–¥–Ω—ã—Ö</span><span class="qcard-var">top-down</span></div>
      <div class="qcard-msg">–í—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–µ—Ä–≤–∞—è –ø–æ–¥—Ö–æ–¥—è—â–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è.</div>
      <table class="qcard-table"><tr><th>#</th><th>–õ–æ–≥–∏–∫–∞</th></tr>
        <tr><td>–°1</td><td>{why_single}=past_hurt</td></tr><tr><td>–°3</td><td>{level}=sleeping/awakening & {last_sex}=half_year/over_year</td></tr>
        <tr><td>–°5</td><td>{ideal_type}=alpha & {level}=sleeping/awakening</td></tr><tr><td>–°4</td><td>{flirt_skill}=shy/passive & {dates_invites}=rare/almost_never</td></tr>
        <tr><td>–°8</td><td>{first_date_feel}=tense/anxious</td></tr><tr><td>–°6</td><td>{dating_apps}=active & {dates_invites}=rare/almost_never</td></tr>
        <tr><td>–°2</td><td>{why_single}=no_good_men</td></tr><tr><td>–°7</td><td>{why_single}=no_time</td></tr>
        <tr><td>–°10</td><td>{level}=fire/goddess</td></tr><tr><td>–°9</td><td>{her_goal_single}=understand</td></tr>
        <tr><td>–°11</td><td>{her_goal_single}=seduce</td></tr><tr><td>–°12</td><td>{her_goal_single}=healthy</td></tr>
        <tr><td>–°13</td><td>{ideal_type}=romantic & {ideal_intimacy}=emotional</td></tr><tr><td>–°14</td><td>{why_single}=by_choice</td></tr>
        <tr><td>–°15</td><td>Fallback</td></tr></table>
    </div>

    <div class="qcard" id="vars" style="left:620px; top:5650px; width:960px; border-color: rgba(107,255,184,0.4);">
      <div class="qcard-head"><span class="qcard-num" style="background:var(--green-bg);color:var(--green);">7</span><span class="qcard-title">–°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö</span><span class="qcard-var">all vars</span></div>
      <div class="qcard-msg">–ö–ª—é—á–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ —à–∞–±–ª–æ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.</div>
      <table class="qcard-table"><tr><th>–ì—Ä—É–ø–ø–∞</th><th>–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</th></tr>
        <tr><td>–°—Ç–∞—Ç—É—Å</td><td>{status}, {why_single}, {years}, {kids}</td></tr>
        <tr><td>–í–µ—Ç–∫–∞ 2–ê</td><td>{her_role}, {her_goal}, {her_experience}</td></tr>
        <tr><td>–í–µ—Ç–∫–∞ 2–ë</td><td>{last_sex}, {dates_invites}, {dating_apps}, {flirt_skill}, {first_date_feel}, {her_goal_single}</td></tr>
        <tr><td>–†–∞—Å–∫—Ä–µ–ø–æ—â—ë–Ω–Ω–æ—Å—Ç—å</td><td>{style}, {oral_attitude}, {body_comfort}, {toys_exp}, {communicate_desires}, {experiments}, {her_initiative}, {vocal}, {location}, {total_score}, {level}</td></tr>
        <tr><td>–í–µ—Ç–∫–∞ 4–ê/5</td><td>{he_desire}, {he_likes}, {he_response}, {frequency}, {initiator}, {cheating}, {main_problem}, {change_wish}</td></tr>
        <tr><td>–í–µ—Ç–∫–∞ 4–ë</td><td>{ideal_type}, {ideal_vibe}, {ideal_intimacy}</td></tr></table>
    </div>
  </div>
</div>

<!-- LEGEND -->
<div class="legend">
  <div class="legend-row"><div class="legend-dot" style="background:var(--purple)"></div>–ë–ª–æ–∫ 1 ‚Äî –æ–±—â–∏–µ</div>
  <div class="legend-row"><div class="legend-dot" style="background:var(--pink)"></div>–í–µ—Ç–∫–∞ ¬´–í –ø–∞—Ä–µ¬ª</div>
  <div class="legend-row"><div class="legend-dot" style="background:var(--blue)"></div>–í–µ—Ç–∫–∞ ¬´–°–≤–æ–±–æ–¥–Ω–∞¬ª</div>
  <div class="legend-row"><div class="legend-dot" style="background:var(--orange)"></div>–ë–ª–æ–∫ 3 ‚Äî –¥–ª—è –≤—Å–µ—Ö</div>
  <div class="legend-row"><div class="legend-dot" style="background:var(--green)"></div>–†–µ–∑—É–ª—å—Ç–∞—Ç</div>
</div>

<!-- MINIMAP -->
<div class="minimap" id="minimap">
  <canvas id="mmCanvas" width="180" height="120"></canvas>
  <div class="minimap-vp" id="mmVp"></div>
</div>

<script>
// === PAN & ZOOM ===
const wrap = document.getElementById('wrap');
const cvs = document.getElementById('canvas');
let sc = 0.45, px = 0, py = 0;
let dragging = false, sx, sy;

function apply() {
  cvs.style.transform = `translate(${px}px,${py}px) scale(${sc})`;
  document.getElementById('zoomLvl').textContent = Math.round(sc*100)+'%';
  updateMM();
}

wrap.addEventListener('mousedown', e => {
  if (e.target.closest('.qcard, .decision, .placeholder-card')) { /* allow text selection */ }
  else { dragging = true; sx = e.clientX - px; sy = e.clientY - py; wrap.classList.add('panning'); e.preventDefault(); }
});
window.addEventListener('mousemove', e => { if (!dragging) return; px = e.clientX - sx; py = e.clientY - sy; apply(); });
window.addEventListener('mouseup', () => { dragging = false; wrap.classList.remove('panning'); });

wrap.addEventListener('wheel', e => {
  e.preventDefault();
  const d = e.deltaY > 0 ? -0.05 : 0.05;
  const ns = Math.min(2, Math.max(0.15, sc + d));
  const r = wrap.getBoundingClientRect();
  const cx = e.clientX - r.left, cy = e.clientY - r.top;
  px = cx - (cx - px) * (ns / sc);
  py = cy - (cy - py) * (ns / sc);
  sc = ns;
  apply();
}, { passive: false });

function zoomBy(d) { sc = Math.min(2, Math.max(0.15, sc + d)); apply(); }
function resetView() { sc = 0.45; px = 0; py = 0; apply(); }
function jumpTo(x, y) {
  const r = wrap.getBoundingClientRect();
  px = r.width/2 - x * sc;
  py = r.height/2 - y * sc;
  apply();
}

// === DRAW ARROWS ===
function line(x1,y1,x2,y2,color,marker) {
  const svg = document.getElementById('svg');
  const dy = y2-y1, dx = x2-x1;
  const p = document.createElementNS('http://www.w3.org/2000/svg','path');
  // smooth vertical bezier
  const cy1 = y1 + dy*0.4, cy2 = y2 - dy*0.4;
  p.setAttribute('d',`M${x1},${y1} C${x1},${cy1} ${x2},${cy2} ${x2},${y2}`);
  p.setAttribute('stroke', color);
  p.setAttribute('stroke-width','2');
  p.setAttribute('fill','none');
  p.setAttribute('stroke-opacity','0.5');
  p.setAttribute('marker-end',`url(#${marker})`);
  svg.appendChild(p);
}

function getBot(id) { const e=document.getElementById(id); if(!e)return null; return { x:parseInt(e.style.left)+e.offsetWidth/2, y:parseInt(e.style.top)+e.offsetHeight }; }
function getTop(id) { const e=document.getElementById(id); if(!e)return null; return { x:parseInt(e.style.left)+e.offsetWidth/2, y:parseInt(e.style.top) }; }

function drawArrows() {
  const svg = document.getElementById('svg');
  svg.querySelectorAll('path').forEach(p=>p.remove());

  const connect = (fromId, toId, color, marker, dx1=0, dx2=0, dy1=0) => {
    const f = getBot(fromId), t = getTop(toId);
    if (!f || !t) return;
    line(f.x + dx1, f.y + dy1, t.x + dx2, t.y, color, marker);
  };

  // Block 1: —Å—Ç–∞—Ä—Ç + –≤–µ—Ç–≤–ª–µ–Ω–∏–µ
  connect('q11','q11b','#6b9dff','ab',-80,0);
  connect('q11','q12','#ff6b9d','ak',80,0);
  connect('q11b','q13','#a06bff','ap',0,-40);
  connect('q12','q13','#a06bff','ap',0,40);
  connect('q13','dec1','#a06bff','ap');

  // –†–∞–∑–≤–∏–ª–∫–∞ 1 -> –±–ª–æ–∫–∏ 2–ê –∏ 2–ë
  connect('dec1','q2a1','#ff6b9d','ak',-70,0);
  connect('dec1','q2b1','#6b9dff','ab',70,0);

  // –ë–ª–æ–∫ 2–ê (–≤ –ø–∞—Ä–µ)
  [['q2a1','q2a2'],['q2a2','q2a3']].forEach(([a,b])=>connect(a,b,'#ff6b9d','ak'));

  // –ë–ª–æ–∫ 2–ë (—Å–≤–æ–±–æ–¥–Ω–∞)
  [['q2b1','q2b2'],['q2b2','q2b3'],['q2b4','q2b5'],['q2b5','q2b6']]
    .forEach(([a,b])=>connect(a,b,'#6b9dff','ab'));
  connect('q2b3','q2b4','#6b9dff','ab',100,0,-50); // –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø—Ä–∞–≤—É—é –∫–æ–ª–æ–Ω–∫—É

  // –ü–µ—Ä–µ—Ö–æ–¥—ã –∏–∑ –±–ª–æ–∫–∞ 2 -> –±–ª–æ–∫ 3
  connect('q2a3','q31','#ff6b9d','ak');
  connect('q2b6','q35','#6b9dff','ab',0,0);

  // –ë–ª–æ–∫ 3: –ø–æ–¥—Ä–æ–±–Ω–∞—è –ª–∏–Ω–µ–π–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ (—á—Ç–æ–±—ã –ª–æ–≥–∏–∫–∞ —Å—á–∏—Ç—ã–≤–∞–ª–∞—Å—å —è–≤–Ω–æ)
  [['q31','q32'],['q32','q33'],['q33','q34'],['q34','q35']]
    .forEach(([a,b])=>connect(a,b,'#ffaa6b','ao'));
  connect('q35','q36','#ffaa6b','ao',-220,0); // –ø–µ—Ä–µ–Ω–æ—Å –Ω–∞ –Ω–∏–∂–Ω–∏–π —Ä—è–¥
  [['q36','q37'],['q37','q38'],['q38','q39']]
    .forEach(([a,b])=>connect(a,b,'#ffaa6b','ao'));

  // –ë–ª–æ–∫ 3 -> –ø–æ–¥—Å—á—ë—Ç -> —Ä–∞–∑–≤–∏–ª–∫–∞ 2
  connect('q39','scoring','#ffaa6b','ao');
  connect('scoring','dec2','#ffaa6b','ao');

  // –†–∞–∑–≤–∏–ª–∫–∞ 2 -> 4–ê / 4–ë
  connect('dec2','q4a1','#ff6b9d','ak',-60,0);
  connect('dec2','q4b1','#6b9dff','ab',60,0);

  // –ë–ª–æ–∫ 4–ê -> –±–ª–æ–∫ 5
  [['q4a1','q4a2'],['q4a2','q4a3'],['q4a3','q51']]
    .forEach(([a,b])=>connect(a,b,'#ff6b9d','ak'));

  // –ë–ª–æ–∫ 4–ë -> —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–≤–æ–±–æ–¥–Ω—ã—Ö
  [['q4b1','q4b2'],['q4b2','q4b3']].forEach(([a,b])=>connect(a,b,'#6b9dff','ab'));
  connect('q4b3','recSingle','#6b9dff','ab',0,0);

  // –ë–ª–æ–∫ 5 -> —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø–∞—Ä–µ
  [['q51','q53'],['q52','q54'],['q53','q55']].forEach(([a,b])=>connect(a,b,'#ff6b9d','ak'));
  connect('q54','q55','#ff6b9d','ak',0,80);
  connect('q55','recCouple','#ff6b9d','ak');

  // –°—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Å–≤–æ–¥–∫—É –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
  connect('recCouple','vars','#6bffb8','ag');
  connect('recSingle','vars','#6bffb8','ag');
}

// === MINIMAP ===
function updateMM() {
  const mc=document.getElementById('mmCanvas'), ctx=mc.getContext('2d');
  ctx.clearRect(0,0,mc.width,mc.height);
  const bw=2300, bh=6200, s=Math.min(mc.width/bw, mc.height/bh);
  document.querySelectorAll('.qcard,.placeholder-card,.decision').forEach(n=>{
    const x=parseInt(n.style.left)*s, y=parseInt(n.style.top)*s;
    const w=(n.offsetWidth||340)*s, h=(n.offsetHeight||100)*s;
    if(n.classList.contains('qcard-purple')||n.classList.contains('decision')) ctx.fillStyle='#a06bff';
    else if(n.classList.contains('qcard-pink')) ctx.fillStyle='#ff6b9d';
    else if(n.classList.contains('qcard-blue')) ctx.fillStyle='#6b9dff';
    else if(n.classList.contains('qcard-orange')) ctx.fillStyle='#ffaa6b';
    else if(n.classList.contains('qcard-green')) ctx.fillStyle='#6bffb8';
    else ctx.fillStyle='#555';
    ctx.globalAlpha=0.7;
    ctx.fillRect(x,y,Math.max(w,3),Math.max(h,2));
  });
  ctx.globalAlpha=1;
  const vp=document.getElementById('mmVp'), wr=wrap.getBoundingClientRect();
  vp.style.left=(-px/sc)*s+'px'; vp.style.top=(-py/sc)*s+'px';
  vp.style.width=(wr.width/sc)*s+'px'; vp.style.height=(wr.height/sc)*s+'px';
}

// === INIT ===
apply();
requestAnimationFrame(()=>requestAnimationFrame(drawArrows));
</script>

</body>
</html>
